
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Моя МФО</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;HTTP&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="HTTP">HTTP</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#vvedenie" class="toc-h1 toc-link" data-title="Введение">Введение</a>
          </li>
          <li>
            <a href="#publikatsiya-veb-servisov" class="toc-h1 toc-link" data-title="Публикация веб-сервисов">Публикация веб-сервисов</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#pri-rabote-na-sobstvennom-servere" class="toc-h2 toc-link" data-title="Публикация веб-сервисов">При работе на собственном сервере</a>
                  </li>
                  <li>
                    <a href="#pri-rabote-cherez-quot-servis-klaud-quot" class="toc-h2 toc-link" data-title="Публикация веб-сервисов">При работе через "Сервис Клауд"</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#kontseptsiya-raboty-lichnogo-kabineta" class="toc-h1 toc-link" data-title="Концепция работы личного кабинета">Концепция работы личного кабинета</a>
          </li>
          <li>
            <a href="#vhod-v-lichnyy-kabinet" class="toc-h1 toc-link" data-title="Вход в личный кабинет">Вход в личный кабинет</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#avtorizatsiya-klienta-v-lk" class="toc-h2 toc-link" data-title="Вход в личный кабинет">Авторизация клиента в ЛК</a>
                  </li>
                  <li>
                    <a href="#poluchenie-vseh-nomerov-dogovorov-sdelok-po-odnomu-klientu" class="toc-h2 toc-link" data-title="Вход в личный кабинет">Получение всех номеров договоров (сделок) по одному клиенту</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#vydacha-zaymov" class="toc-h1 toc-link" data-title="Выдача займов">Выдача займов</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#otpravka-zayavki" class="toc-h2 toc-link" data-title="Выдача займов">Отправка заявки</a>
                  </li>
                  <li>
                    <a href="#proverka-statusa-dogovora-sdelki" class="toc-h2 toc-link" data-title="Выдача займов">Проверка статуса договора (сделки)</a>
                  </li>
                  <li>
                    <a href="#dobavlenie-bankovskoy-karty" class="toc-h2 toc-link" data-title="Выдача займов">Добавление банковской карты</a>
                  </li>
                  <li>
                    <a href="#poluchenie-dogovora-v-formate-quot-pdf-quot-bez-podpisi" class="toc-h2 toc-link" data-title="Выдача займов">Получение договора в формате "pdf" (без подписи)</a>
                  </li>
                  <li>
                    <a href="#zapros-na-poluchenie-koda-asp-analoga-sobstvenoruchnoy-podpisi-iz-quot-moya-mfo-quot" class="toc-h2 toc-link" data-title="Выдача займов">Запрос на получение кода АСП (аналога собственоручной подписи) из "Моя МФО"</a>
                  </li>
                  <li>
                    <a href="#otpravka-ukazannogo-klientom-koda-asp-i-poluchenie-podpisannogo-dogovora-v-formate-quot-pdf-quot" class="toc-h2 toc-link" data-title="Выдача займов">Отправка указанного клиентом кода АСП и получение подписанного договора в формате "pdf"</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#priem-platezhey" class="toc-h1 toc-link" data-title="Прием платежей">Прием платежей</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#poluchenie-svodnyh-dannyh-o-summe-tekuschey-zadolzhennosti-po-konkretnomu-dogovoru-dlya-vyvoda-v-lichnom-kabinete" class="toc-h2 toc-link" data-title="Прием платежей">Получение сводных данных о сумме текущей задолженности по конкретному договору для вывода в личном кабинете</a>
                  </li>
                  <li>
                    <a href="#poluchenie-dannyh-o-zadolzhennosti-pri-oplate-cherez-sayt-dlya-ekvayringa" class="toc-h2 toc-link" data-title="Прием платежей">Получение данных о задолженности при оплате через сайт (для эквайринга)</a>
                  </li>
                  <li>
                    <a href="#otrazhenie-v-sisteme-quot-moya-mfo-quot-poluchennogo-na-sayte-platezha-ekvayring" class="toc-h2 toc-link" data-title="Прием платежей">Отражение в системе "Моя МФО" полученного на сайте платежа (эквайринг)</a>
                  </li>
                  <li>
                    <a href="#otrazhenie-v-sisteme-quot-moya-mfo-quot-poluchennogo-platezha-cherez-platezhnye-sistemy-qiwi-zolotaya-korona-eleksnet-mkb-moskovskiy-kreditnyy-bank" class="toc-h2 toc-link" data-title="Прием платежей">Отражение в системе "Моя МФО" полученного платежа через платежные системы: QIWI, Золотая корона, Элекснет, МКБ (Московский кредитный банк)</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li>ООО "Моя МФО".</li>
            <li>Все права защищены.</li>
            <li><a href='http://mfo1c.ru'>Перейти на сайт Моя МФО</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='vvedenie'>Введение</h1>
<p>Данная документация создана с целью описания механизмов взаимодействия системы &quot;Моя МФО&quot; и сайта компании, которая является пользователем данного программного продукта.
Данный API (программный интерфейс) позволяет реализовать различные схемы взаимодействия: загрузку заявок, выдачу займов и прием платежей.
Чтобы начать использовать эти возможности нужно начать с публикации веб-сервисов.
Далее вы найдете описание самих веб-сервисов с примерами.</p>

<aside class="notice">
Настройка веб-сервера и подключение http-сервисов, требуют определенного опыта, и не являются самыми простыми механизмами, поэтому при необходимости возможна помощь специалиста 1С.
</aside>
<h1 id='publikatsiya-veb-servisov'>Публикация веб-сервисов</h1><h2 id='pri-rabote-na-sobstvennom-servere'>При работе на собственном сервере</h2>
<p>На сервере, где требуется произвести публикацию веб-сервисов необходимо произвести установку веб сервера (MS IIS или Apache), после этого, к нему устанавливается плагин от 1С, который передает запросы пользователей на сервер 1С.</p>

<p>Таким образом, операции физически выполняет сервер 1С, а веб-сервер (веб-сервис) служит просто передающим звеном.</p>

<p><b>Производим установку веб сервера 1С.</b></p>

<p>Установим веб сервер Microsoft Information Services (IIS)
Установку веб сервера можно произвести из Панели управления Windows (варианты):</p>

<ul>
<li>Установка и удаление программ/Компоненты Windows/IIS</li>
<li>Program and features/Turn windows features on or off/Add features.</li>
</ul>

<p>В Windows 8 перейдите на закладку Roles, выберите Add Roles (откроется мастер).</p>

<p>На соответствующих закладках мастера нужно выбрать:</p>

<ul>
<li>Web Server (IIS)</li>
<li>Application Development/ISAPI Extensions.</li>
</ul>

<p><code>В других версиях Windows первая галочка может называться «Internet Information Services», вторая так же, или «Расширения ISAPI».</code></p>

<p><b>Установим компоненты 1С:Предприятие (после IIS)</b></p>

<p>Нужно проверить, что при установки платформы были установлены следующие компоненты:</p>

<ul>
<li>Адаптер Web-сервисов 1С:Предприятие</li>
</ul>

<p><b>Проведем настройку IIS (после установки 1С)</b></p>

<p>Настройку можно проводить в «Диспетчере служб IIS (IIS manager)», который находится в Панели управления Windows/Администрирование.</p>

<p>В ветке «Узлы (Web Sites)» находится веб-узел по-умолчанию, нажмите на него правой кнопкой и выберите «Добавить виртуальный каталог».
Выделим курсором созданный каталог (левой кнопкой мыши), справа отобразятся различные его настройки. Выберите «Сопоставление обработчиков (Handler mappings)».</p>

<p>Справа появятся доступные действия. Выберите «Добавить сопоставление сценария (Add script map)».</p>

<p>Введите путь запроса «*», выберите исполняемый файл «wsisapi.dll» в каталоге bin соответствующей версии 1С:Предприятие, установленной на этом сервере (не забываем про права, если они у Вас специально ограничены).</p>

<p>По кнопке «Ограничение запроса (Request Restrictions)» там же, необходимо установить разрешающую галочку. После создания этого обработчика, установите на него курсор мыши, выберите «Проверка подлинности (Edit handler permissions)», разрешите его выполнение (Execute). Если база файловая, необходимо дать доступ к папке базы.</p>

<p>Далее правой кнопкой на созданный каталог, пункт «Преобразовать в приложение (Convert to Application)».</p>

<p><b>Публикация веб-сервисов конкретной базы</b></p>

<p>Зайдите в конфигуратор требуемой базы данных на этом сервере (компьютере).</p>

<p>В меню Администрирование/Публикация на веб-сервере выберите:</p>

<ul>
<li>имя базы</li>
<li>каталог (обычно это «C:\Intetpub\wwwroot\КаталогОпубликованногоHTTPСервиса\») </li>
</ul>

<p><code>КаталогОпубликованногоHTTPСервиса - можно назвать именем базы</code></p>

<ul>
<li>на вкладке http-сервисы проставьте все галки</li>
</ul>

<p>Нажмите кнопку «Опубликовать».</p>

<p>В результате в требуемом каталоге должен появится файл с расширением VRD.</p>

<p><code>Проверяем брандмауэр (фаервол), антивирус и фильтры трафика на блокировку доступа к веб-сервису</code></p>
<h2 id='pri-rabote-cherez-quot-servis-klaud-quot'>При работе через &quot;Сервис Клауд&quot;</h2>
<p>В случае, если вы работаете на сервере компании &quot;Сервис Клауд&quot;, нужно произвести ряд действий:</p>

<ol>
<li><p>Добавить в информационную базу пользователя с таким же логином и паролем, как у одного из учетных записей для подключения к серверу &quot;Сервис Клауд&quot;.
Именно под этим пользователем будет происходить авторизация и выполнение веб-сервисов.</p></li>
<li><p>Написать в службу технической поддержки запрос о публикации всех веб-сервисов вашей рабочей информационной базы. Путь к базе или название нужно указать, чтобы они поняли о какой базе идет речь.</p></li>
<li><p>В случае, если специалисты тех.поддержки опубликуют веб-сервисы, уточнить у них пути к веб-сервисам, если они не предоставят их в письме-уведомлении.</p></li>
</ol>
<h1 id='kontseptsiya-raboty-lichnogo-kabineta'>Концепция работы личного кабинета</h1>
<p>Личный кабинет заемщика на сайте компании - это раздел на сайте МФО, доступ к которому имеют только авторизованные пользователи, и который позволяет, в зависимости от установленных в компании правил производить:</p>

<ul>
<li>оформление заявки на займ</li>
<li>подпись документов</li>
<li>контроль текущей задолженности по займам</li>
<li>просмотр истории заявок и займов</li>
<li>внесение оплаты за займы
и т.д.</li>
</ul>

<p>Для осуществления выше описанных функций требуется информация, которая содержится в системе &quot;Моя МФО&quot;.
Чтобы получить эту информацию необходимо выполять конкретные http-запросы к опубликованной базе &quot;Моя МФО&quot;.</p>

<p>Запросы выполняются последовательно. Ниже приведен один из вариантов реализации такого взаимодействия:</p>

<ol>
<li>Отправляется заявка на займ. Выполняется http-метод <a href="#otpravka-zayavki">Request</a>.</li>
<li>После отправки заявки, заемщик может перейти в раздел &quot;Личный кабинет&quot; на сайте ввести свой номер телефона/паспорта или другой идентификатор. 
После ввода ему в СМС или на e-mail должен прийти пароль для входа. Для получения пароля и входа в личный кабинет используется http-метод <a href="#avtorizatsiya-klienta-v-lk">client</a>.</li>
<li>Сразу после авторизации выполняется http-метод <a href="#poluchenie-vseh-nomerov-dogovorov-sdelok-po-odnomu-klientu">NumbersDeals</a>, который получает все номера заявок и договоров текущего клиента.</li>
<li>Далее может быть выполнен http-метод <a href="#proverka-statusa-dogovora-sdelki">StatusDeal</a>, который получает статусы заявок.</li>
<li>Далее, если клиент входит в конкретную заявку/договор, может быть вызван http-метод <a href="#poluchenie-svodnyh-dannyh-o-summe-tekuschey-zadolzhennosti-po-konkretnomu-dogovoru-dlya-vyvoda-v-lichnom-kabinete">PS</a>, который отображает подробную информацию о текущей задолженности.</li>
<li>Если клиент подал заявку и она одобрена, он может ознакомиться с договором, который может быть получен http-методом <a href="#poluchenie-dogovora-v-formate-quot-pdf-quot-bez-podpisi">dealinpdf</a>.</li>
<li>На этом этапе или раньше клиент должен привязать банковскую карту. Привязанная карта передается в базу &quot;Моя МФО&quot; при помощи http-метода <a href="#dobavlenie-bankovskoy-karty">card/attachtoclient</a> или card/attachtodeal.</li>
<li>Если клиент готов подписать договор вызывается http-метод <a href="#zapros-na-poluchenie-koda-asp-analoga-sobstvenoruchnoy-podpisi-iz-quot-moya-mfo-quot">dealsign/code</a>, который отправляет сайту одноразовый код для подписания договора.
Данный код, должен быть указан клиентом как аналог собственоручной подписи.</li>
<li>Если клиент указал код, он должен быть отправлен сайтом на проверку в базу &quot;Моя МФО&quot; посредством http-метода <a href="#otpravka-ukazannogo-klientom-koda-asp-i-poluchenie-podpisannogo-dogovora-v-formate-quot-pdf-quot">dealsign/codereview</a>. Если код указан верно возвращается подписанный договор.</li>
<li>Далее из системы &quot;Моя МФО&quot; происходит выдача займа. В случае, если выдача происходит за пределами системы &quot;Моя МФО&quot; зарегистрировать факт выдачи займа можно при помощи метода fixingissue.</li>
<li>Внесение оплаты по займу может быть произведено разными способами. Для сервисов, с которыми реализована прямая интеграция нет необходимости дополнительных настроек на стороне сайта, это такие сервисы как:</li>
</ol>

<ul>
<li>Золотая корона</li>
<li>Киви</li>
<li>Элекснет</li>
<li>МКБ</li>
<li>Mandarinpay</li>
</ul>

<p>В случае, если на сайте имеется какой-то уникальный метод внесения платежей, он может быть интегрирован с системой &quot;Моя МФО&quot; в формате, когда информацию о платеже передает сам сайт.
В этом случае используется метод <a href="#otrazhenie-v-sisteme-quot-moya-mfo-quot-poluchennogo-na-sayte-platezha-ekvayring">Payment/Site</a>.</p>

<aside class="notice">
В случае дополнительных вопросов вы всегда можете обратиться в службу технической поддержки по адресу: support@mfo1c.ru.
</aside> 
 
<h1 id='vhod-v-lichnyy-kabinet'>Вход в личный кабинет</h1><h2 id='avtorizatsiya-klienta-v-lk'>Авторизация клиента в ЛК</h2><pre class="highlight plaintext"><code>GET http://192.168.0.1/MeMFOWork/hs/client/?phone=89111111111&amp;pass=Hgu32D11`
User-Agent: АдресСервера
Content-Type: application/json
</code></pre>
<blockquote>
<p>Данный запрос возвращает строку в формате xml:</p>
</blockquote>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;response&gt;</span>
    <span class="nt">&lt;status&gt;</span>0<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;errormessage&gt;&lt;/errormessage&gt;</span>
    <span class="nt">&lt;IDClient&gt;</span>0000001232<span class="nt">&lt;/IDClient&gt;</span>
    <span class="nt">&lt;fio&gt;</span>Иванов Иван Иванович<span class="nt">&lt;/fio&gt;</span>
    <span class="nt">&lt;datebirthday&gt;</span>22.11.1988<span class="nt">&lt;/datebirthday&gt;</span>
    <span class="nt">&lt;series&gt;</span>0101<span class="nt">&lt;/series&gt;</span>
    <span class="nt">&lt;number&gt;</span>111222<span class="nt">&lt;/number&gt;</span>
    <span class="nt">&lt;issued&gt;</span>МО УФМС России<span class="nt">&lt;/issued&gt;</span>
    <span class="nt">&lt;dateissue&gt;</span>29.07.2008<span class="nt">&lt;/dateissuecode&gt;</span>
    <span class="nt">&lt;code&gt;</span>270-000<span class="nt">&lt;/code&gt;</span>
    <span class="nt">&lt;residence&gt;</span>190000, Санкт-Петербург, пр. Обуховской обороны д.86 кв.17<span class="nt">&lt;/residence&gt;</span>
    <span class="nt">&lt;registration&gt;</span>190000, Санкт-Петербург, пр. Елизарова д.12 кв.271<span class="nt">&lt;/registration&gt;</span>
    <span class="nt">&lt;placeofwork&gt;</span>ООО "Перспектива"<span class="nt">&lt;/placeofwork&gt;</span>
    <span class="nt">&lt;email&gt;</span>test@mail.ru<span class="nt">&lt;/email&gt;</span>
    <span class="nt">&lt;blacklist&gt;</span>false<span class="nt">&lt;/blacklist&gt;</span>
    <span class="nt">&lt;dateofban&gt;</span>11.01.2019<span class="nt">&lt;/dateofban&gt;</span>
<span class="nt">&lt;/response&gt;</span>
</code></pre>
<p>Данный запрос позволяет получить данные по клиенту из базы &quot;Моя МФО&quot; по номеру телефона и хэш-паролю (параметр Pass).</p>

<aside class="notice">
Если хэш-пароль не задан, система его создает. В этом случае в запросе он не передается.
</aside>
<h3 id='http-zapros'>HTTP-запрос</h3>
<p><code>GET http://&lt;АдресСервера&gt;/&lt;КаталогОпубликованногоHTTPСервиса&gt;/hs/client/?phone=&lt;phone&gt;&amp;pass=&lt;pass&gt;</code></p>
<h3 id='parametry-zaprosa'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>phone</td>
<td>Телефон клиента</td>
</tr>
<tr>
<td>pass</td>
<td>Хэш-пароль, формируется как sha256 от phone + Пароль клиента в базе. Если не передается система формирует его и возвращает в ответе.</td>
</tr>
</tbody></table>
<h3 id='vozvraschaemye-znacheniya'>Возвращаемые значения</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>Статус: 0 - успешно; 2 - не успешно, не совпадает пароль; 11 - успешно, создан пароль; 1 - не найден контрагент или не задан СМС-шаблон</td>
</tr>
<tr>
<td>errormessage</td>
<td>Описание ошибки</td>
</tr>
<tr>
<td>IDClient</td>
<td>Идентификатор клиента</td>
</tr>
<tr>
<td>fio</td>
<td>ФИО клиента</td>
</tr>
<tr>
<td>datebirthday</td>
<td>Дата рождения</td>
</tr>
<tr>
<td>series</td>
<td>Серия паспорта</td>
</tr>
<tr>
<td>issued</td>
<td>Орган выдачи паспорта</td>
</tr>
<tr>
<td>dateissue</td>
<td>Дата выдачи паспорта</td>
</tr>
<tr>
<td>code</td>
<td>Код подразделения</td>
</tr>
<tr>
<td>residence</td>
<td>Адрес по месту проживания</td>
</tr>
<tr>
<td>registration</td>
<td>Адрес по месту регистрации</td>
</tr>
<tr>
<td>placeofwork</td>
<td>Место работы</td>
</tr>
<tr>
<td>email</td>
<td>Адрес эл. почты</td>
</tr>
<tr>
<td>blacklist</td>
<td>Клиент в черном списке (true/false)</td>
</tr>
<tr>
<td>dateofban</td>
<td>Дата запрета на подачу заявок</td>
</tr>
</tbody></table>
<h2 id='poluchenie-vseh-nomerov-dogovorov-sdelok-po-odnomu-klientu'>Получение всех номеров договоров (сделок) по одному клиенту</h2><pre class="highlight plaintext"><code>GET http://192.168.0.1/MeMFOWork/hs/NumbersDeals/0808761223`
User-Agent: АдресСервера
Content-Type: application/json
</code></pre>
<blockquote>
<p>Данный запрос возвращает строку в формате JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"Договоры"</span><span class="p">:</span><span class="w"> 
    </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"НомерДоговора"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ТСК000153"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Оплачен"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"НомерДоговора"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ТСК000145"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Оплачен"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"НомерДоговора"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ТСК000075"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Оплачен"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"НомерДоговора"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ТСК000030"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Оплачен"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"НомерДоговора"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ТСК000161"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Оплачен"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"СообщениеОбОшибке"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Данный запрос позволяет получить информацию о всех номерах договоров (сделок).</p>
<h3 id='http-zapros-2'>HTTP-запрос</h3>
<p><code>GET http://&lt;АдресСервера&gt;/&lt;КаталогОпубликованногоHTTPСервиса&gt;/hs/NumbersDeals/&lt;Паспорт&gt;</code></p>
<h3 id='parametry-zaprosa-2'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>АдресСервера</td>
<td>Адрес сервера, на котором опубликован веб-сервис</td>
</tr>
<tr>
<td>КаталогОпубликованногоHTTPСервиса</td>
<td>Каталог в папке wwwroot с опубликованным сервисом</td>
</tr>
<tr>
<td>Паспорт</td>
<td>Серия и номер паспорта без пробелов</td>
</tr>
</tbody></table>
<h3 id='vozvraschaemye-znacheniya-2'>Возвращаемые значения</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>НомерДоговора</td>
<td>Номер договора займа</td>
</tr>
<tr>
<td>Оплачен</td>
<td>Статус оплаты займа: true или false</td>
</tr>
<tr>
<td>СообщениеОбОшибке</td>
<td>Описание ошибки, если она возникает</td>
</tr>
</tbody></table>
<h1 id='vydacha-zaymov'>Выдача займов</h1><h2 id='otpravka-zayavki'>Отправка заявки</h2><pre class="highlight plaintext"><code>POST http://АдресСервера/КаталогОпубликованногоHTTPСервиса/hs/Request/
User-Agent: АдресСервера
Content-Type: application/json
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"ID"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Тестов"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Тест"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"middle_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Тестович"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"89117115544"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"birthday"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-05"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"test88@mail.ru"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"15000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"period"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-20"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"inn_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4445558877"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"id_sex"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Мужской"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"passport_series"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"45 10"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"passport_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"666666"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"passport_date_of_issue"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2008-01-09"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"birthplace"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"г. Хабаровск"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"passport_org"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ОВД Центрального округа, гор. Хабаровска"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"passport_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"270-009"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"incoming"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"35000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"work_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ОАО РЖД"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"experience"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"work_phone"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"88123839935"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"residential_region"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Забайкальский кр."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"residential_city"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"г. Самара"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"residential_street"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Афонина"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"residential_house"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"residential_building"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"residential_apartment"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"62"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"match_addresses"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
  </span><span class="s2">"registrarion_region"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Санкт-Петербург"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"registrarion_city"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Зеленогорск"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"registrarion_street"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Порядковая"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"registrarion_house"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"11"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"registrarion_building"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"registrarion_apartment"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"58"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="s2">"filename"</span><span class="p">:</span><span class="s2">"Паспорт_страница_1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bitmap"</span><span class="p">:</span><span class="s2">"0KLQtdGB0YIx"</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="s2">"filename"</span><span class="p">:</span><span class="s2">"Паспорт_страница_2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bitmap"</span><span class="p">:</span><span class="s2">"0KLQtdGB0YIy"</span><span class="p">}</span><span class="w">
           </span><span class="p">]</span><span class="w">

  </span><span class="err">//для</span><span class="w"> </span><span class="err">передачи</span><span class="w"> </span><span class="err">информации</span><span class="w"> </span><span class="err">об</span><span class="w"> </span><span class="err">автозалоге...</span><span class="w">
  </span><span class="s2">"car_model"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Тойота Камри"</span><span class="p">,</span><span class="w">          
  </span><span class="s2">"car_issuedate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2006"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"car_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"600000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"car_color"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Белый"</span><span class="w">
  </span><span class="s2">"car_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"С238ОГ"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"car_vin"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"GDRT2890JH23GFDV22"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sts_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"К34821"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sts_issueby"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Центральной МВД"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pts_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"34 4321м"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pts_issueby"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Центральной МВД"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Данный запрос возвращает строку в формате JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Заявка создана"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"IDDeal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ТСК000157"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"IDClient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000019183"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>В случае ошибки запрос вернет:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Описание ошибки"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Данный запрос позволяет загружать заявки с сайта компании или других ресурсов (лидогенераторов) в базу &quot;Моя МФО&quot;</p>
<h3 id='http-zapros-3'>HTTP-запрос</h3>
<p><code>POST http://&lt;АдресСервера&gt;/&lt;КаталогОпубликованногоHTTPСервиса&gt;/hs/Request/</code></p>
<h3 id='parametry-zaprosa-3'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>АдресСервера</td>
<td>Адрес сервера, на котором опубликован веб-сервис</td>
</tr>
<tr>
<td>КаталогОпубликованногоHTTPСервиса</td>
<td>Каталог в папке wwwroot с опубликованным сервисом</td>
</tr>
</tbody></table>
<h3 id='opisanie-obyazatelnyh-poley-ankety'>Описание обязательных полей анкеты</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>Сумма займа</td>
</tr>
<tr>
<td>period</td>
<td>Дата возврата</td>
</tr>
<tr>
<td>interval</td>
<td>Количество платежей (для займов с периодическим платежами)</td>
</tr>
<tr>
<td>creditproduct</td>
<td>Кредитный продукт</td>
</tr>
<tr>
<td>last_name</td>
<td>Фамилия</td>
</tr>
<tr>
<td>first_name</td>
<td>Имя</td>
</tr>
<tr>
<td>middle_name</td>
<td>Отчество</td>
</tr>
<tr>
<td>phone</td>
<td>Телефон</td>
</tr>
<tr>
<td>birthday</td>
<td>Дата рождения</td>
</tr>
<tr>
<td>passport_series</td>
<td>Серия паспорта</td>
</tr>
<tr>
<td>passport_number</td>
<td>Номер паспорта</td>
</tr>
</tbody></table>

<aside class="success">
В системе предоставляется загрузка любых доступных полей и назначение им соответствующих тегов при передаче.
Данный функционал настраивается в системе "Моя МФО" в разделе <b>Настройки "Моя МФО"\Общие\Обмен с сайтом\Онлайн-заявки</b>
</aside>
<h3 id='vozvraschaemye-znacheniya-3'>Возвращаемые значения</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td>Результат, 1 - загружено успешно; 0 - не загружено</td>
</tr>
<tr>
<td>description</td>
<td>Описание</td>
</tr>
<tr>
<td>IDDeal</td>
<td>Номер заявки (договора)</td>
</tr>
<tr>
<td>IDClient</td>
<td>Код заемщика</td>
</tr>
</tbody></table>
<h2 id='proverka-statusa-dogovora-sdelki'>Проверка статуса договора (сделки)</h2><pre class="highlight plaintext"><code>POST http://192.168.0.1/MeMFOWork/hs/statusdeal`
User-Agent: АдресСервера
Content-Type: application/json
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"IDDeal1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1_000000001"</span><span class="w">
  </span><span class="s2">"IDDeal2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1_000000012"</span><span class="w">
  </span><span class="s2">"IDDeal3"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1_000000003"</span><span class="w">
  </span><span class="s2">"IDDeal4"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1_000000010"</span><span class="w">
</span><span class="p">}</span><span class="w"> 
</span></code></pre>
<blockquote>
<p>Данный запрос возвращает строку в формате JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"ID1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"НомерСделки"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1_000000001"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ДатаСделки"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-21T10:15:30"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Статус"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Выдан"</span><span class="w">
            </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ID2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"НомерСделки"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1_000000012"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ДатаСделки"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-12T10:15:30"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Статус"</span><span class="p">:</span><span class="w"> </span><span class="s2">"На рассмотрении"</span><span class="w">
            </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ID3"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"НомерСделки"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1_000000003"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ДатаСделки"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-23T10:15:30"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Статус"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Оплачен"</span><span class="w">
            </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ID3"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"НомерСделки"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1_000000010"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ДатаСделки"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-20T10:15:30"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Статус"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Предварительно одобрено"</span><span class="w">
            </span><span class="p">},</span><span class="w">

    </span><span class="s2">"КодОтвета"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Данный запрос позволяет получить информацию о статусе договора (сделки) по ее номеру.</p>
<h3 id='http-zapros-4'>HTTP-запрос</h3>
<p><code>POST http://&lt;АдресСервера&gt;/&lt;КаталогОпубликованногоHTTPСервиса&gt;/hs/statusdeal</code></p>
<h3 id='parametry-zaprosa-4'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>АдресСервера</td>
<td>Адрес сервера, на котором опубликован веб-сервис</td>
</tr>
<tr>
<td>КаталогОпубликованногоHTTPСервиса</td>
<td>Каталог в папке wwwroot с опубликованным сервисом</td>
</tr>
<tr>
<td>IDDeal (n)</td>
<td>Номер договора займа</td>
</tr>
</tbody></table>
<h3 id='vozvraschaemye-znacheniya-4'>Возвращаемые значения</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>НомерСделки</td>
<td>Номер договора займа</td>
</tr>
<tr>
<td>ДатаСделки</td>
<td>Дата договора займа</td>
</tr>
<tr>
<td>Статус</td>
<td>Статус договора займа</td>
</tr>
</tbody></table>
<h3 id='spisok-statusov'>Список статусов</h3>
<table><thead>
<tr>
<th>Статус</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>Новый</td>
<td>Заведена заявка, новый займ</td>
</tr>
<tr>
<td>На рассмотрении</td>
<td>Займ находится на рассмотрении</td>
</tr>
<tr>
<td>Одобрен</td>
<td>По займу приняли положительное решение</td>
</tr>
<tr>
<td>Отказ</td>
<td>По займу приняли отрицательное решение</td>
</tr>
<tr>
<td>Отменен</td>
<td>Заемщик отказался от займа</td>
</tr>
<tr>
<td>Подписан (дистанционно)</td>
<td>Договор подписан дистанционно</td>
</tr>
<tr>
<td>Ожидает списания с р/с</td>
<td>Ожидает отправки ден.средств с банковского счета организации</td>
</tr>
<tr>
<td>Выдан</td>
<td>Займ выдан</td>
</tr>
<tr>
<td>Внесен аванс</td>
<td>Внесен аванс раньше даты платежа</td>
</tr>
<tr>
<td>Оплачен</td>
<td>Займ полностью погашен</td>
</tr>
<tr>
<td>У коллектора</td>
<td>Передан коллектору</td>
</tr>
<tr>
<td>На текущем контроле у коллектора</td>
<td>Коллектор контролирует займ</td>
</tr>
<tr>
<td>Готовится выезд</td>
<td>Коллектор готовит выезд по адресам заемщика</td>
</tr>
<tr>
<td>Признан коллектором как безнадежный</td>
<td>Коллектор установил, что взыскать займ невозможно</td>
</tr>
<tr>
<td>Ожидает передачи на судебную стадию</td>
<td>Коллектор определили перспективу взыскания через суд</td>
</tr>
<tr>
<td>Передан на судебную стадию</td>
<td>Займ передан в юридический отдел на взыскание через суд</td>
</tr>
<tr>
<td>Отправлена претензия</td>
<td>По займу отправлена претензия</td>
</tr>
<tr>
<td>Оплачена пошлина</td>
<td>По займу оплачена пошлина</td>
</tr>
<tr>
<td>В суде</td>
<td>По займу отправлено исковое заявление</td>
</tr>
<tr>
<td>Получен исполнительный лист</td>
<td>Получили исполнительный лист</td>
</tr>
<tr>
<td>Передан судебному приставу</td>
<td>Исполнительный лист передан судебному приставу</td>
</tr>
<tr>
<td>Продан</td>
<td>Займ продан</td>
</tr>
<tr>
<td>Списан</td>
<td>Займ списан</td>
</tr>
</tbody></table>
<h2 id='dobavlenie-bankovskoy-karty'>Добавление банковской карты</h2><pre class="highlight plaintext"><code>GET http://192.168.0.1/MeMFOWork/hs/card/attachtoclient/?id=hfkd123g4453k34598d&amp;name=4321123456788765&amp;client=0000001233&amp;cardholder=IvanovIvan&amp;validity=112020&amp;service=Mandarinpay`
User-Agent: АдресСервера
Content-Type: application/json
</code></pre>
<blockquote>
<p>Данный запрос возвращает строку в формате JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"Результат"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Карта привязана к клиенту"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Данный запрос позволяет добавить банковскую карту клиенту в системе &quot;Моя МФО&quot; для последующей выдачи.</p>
<h3 id='http-zapros-5'>HTTP-запрос</h3>
<p><code>GET http://&lt;АдресСервера&gt;/&lt;КаталогОпубликованногоHTTPСервиса&gt;/hs/card/attachtoclient/?id=&lt;ТокенКарты&gt;&amp;name=&lt;НомерКарты&gt;&amp;client=&lt;IDКлиента&gt;&amp;cardholder=&lt;ДержательКарты&gt;&amp;validity=&lt;СрокДействия&gt;&amp;service=&lt;СервисВыдачи&gt;</code></p>
<h3 id='parametry-zaprosa-5'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>АдресСервера</td>
<td>Адрес сервера, на котором опубликован веб-сервис</td>
</tr>
<tr>
<td>КаталогОпубликованногоHTTPСервиса</td>
<td>Каталог в папке wwwroot с опубликованным сервисом</td>
</tr>
<tr>
<td>ТокенКарты</td>
<td>Токен карты в реестре сервиса выдачи</td>
</tr>
<tr>
<td>НомерКарты</td>
<td>Номер банковской карты</td>
</tr>
<tr>
<td>IDКлиента</td>
<td>Индентификатор клиента</td>
</tr>
<tr>
<td>ДержательКарты</td>
<td>Имя на карте</td>
</tr>
<tr>
<td>СрокДействия</td>
<td>Срок действия банковской карты</td>
</tr>
<tr>
<td>СервисВыдачи</td>
<td>Платежный сервис через который производится выдача. Название должно совпадать с названием в базе &quot;Моя МФО&quot; с реквизитом &quot;Платежный сервис&quot;.</td>
</tr>
</tbody></table>
<h3 id='vozvraschaemye-znacheniya-5'>Возвращаемые значения</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>Результат</td>
<td>Сообщение об успешной привязке</td>
</tr>
<tr>
<td>Error</td>
<td>Описание ошибки, если она возникает</td>
</tr>
</tbody></table>
<h2 id='poluchenie-dogovora-v-formate-quot-pdf-quot-bez-podpisi'>Получение договора в формате &quot;pdf&quot; (без подписи)</h2><pre class="highlight plaintext"><code>GET http://192.168.0.1/MeMFOWork/hs/dealinpdf/1_000000001/?pd=0808223433`
User-Agent: АдресСервера
Content-Type: application/json
</code></pre>
<blockquote>
<p>Данный запрос возвращает строку в формате JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"IDClient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000005729"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"IDDeal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JJJ000141"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"506712"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"СообщениеОбОшибке"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Данный запрос позволяет получить заполненную данными клиента форму договора в формате pdf до подписания его клиентом, для вывода в личном кабинете для ознакомления.</p>
<h3 id='http-zapros-6'>HTTP-запрос</h3>
<p><code>GET http://&lt;АдресСервера&gt;/&lt;КаталогОпубликованногоHTTPСервиса&gt;/hs/dealinpdf/&lt;IDDeal&gt;/?pd=&lt;Паспорт&gt;</code></p>
<h3 id='parametry-zaprosa-6'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>АдресСервера</td>
<td>Адрес сервера, на котором опубликован веб-сервис</td>
</tr>
<tr>
<td>КаталогОпубликованногоHTTPСервиса</td>
<td>Каталог в папке wwwroot с опубликованным сервисом</td>
</tr>
<tr>
<td>Паспорт</td>
<td>Серия и номер паспорта без пробелов (не обязательный)</td>
</tr>
<tr>
<td>IDDeal</td>
<td>Номер договора займа</td>
</tr>
</tbody></table>
<h3 id='vozvraschaemye-znacheniya-6'>Возвращаемые значения</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>IDClient</td>
<td>Код заемщика</td>
</tr>
<tr>
<td>IDDeal</td>
<td>Номер заявки (договора)</td>
</tr>
<tr>
<td>Code</td>
<td>Код АСП</td>
</tr>
<tr>
<td>СообщениеОбОшибке</td>
<td>Описание ошибки, если она возникает</td>
</tr>
</tbody></table>
<h2 id='zapros-na-poluchenie-koda-asp-analoga-sobstvenoruchnoy-podpisi-iz-quot-moya-mfo-quot'>Запрос на получение кода АСП (аналога собственоручной подписи) из &quot;Моя МФО&quot;</h2><pre class="highlight plaintext"><code>GET http://192.168.0.1/MeMFOWork/hs/dealsign/code/0808223433/1_000000001`
User-Agent: АдресСервера
Content-Type: application/json
</code></pre>
<blockquote>
<p>Данный запрос возвращает строку в формате JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"IDClient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000005729"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"IDDeal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JJJ000141"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"506712"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"СообщениеОбОшибке"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Данный запрос позволяет получить код АСП (аналог собственоручной подписи) с целью его отправки клиенту в виде СМС и ввода им в личном кабинете для подписания договора.</p>
<h3 id='http-zapros-7'>HTTP-запрос</h3>
<p><code>GET http://&lt;АдресСервера&gt;/&lt;КаталогОпубликованногоHTTPСервиса&gt;/hs/dealsign/code/&lt;Паспорт&gt;/&lt;IDDeal&gt;</code></p>
<h3 id='parametry-zaprosa-7'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>АдресСервера</td>
<td>Адрес сервера, на котором опубликован веб-сервис</td>
</tr>
<tr>
<td>КаталогОпубликованногоHTTPСервиса</td>
<td>Каталог в папке wwwroot с опубликованным сервисом</td>
</tr>
<tr>
<td>Паспорт</td>
<td>Серия и номер паспорта без пробелов</td>
</tr>
<tr>
<td>IDDeal</td>
<td>Номер договора займа</td>
</tr>
</tbody></table>
<h3 id='vozvraschaemye-znacheniya-7'>Возвращаемые значения</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>IDClient</td>
<td>Код заемщика</td>
</tr>
<tr>
<td>IDDeal</td>
<td>Номер заявки (договора)</td>
</tr>
<tr>
<td>Code</td>
<td>Код АСП</td>
</tr>
<tr>
<td>СообщениеОбОшибке</td>
<td>Описание ошибки, если она возникает</td>
</tr>
</tbody></table>
<h2 id='otpravka-ukazannogo-klientom-koda-asp-i-poluchenie-podpisannogo-dogovora-v-formate-quot-pdf-quot'>Отправка указанного клиентом кода АСП и получение подписанного договора в формате &quot;pdf&quot;</h2><pre class="highlight plaintext"><code>GET http://192.168.0.1/MeMFOWork/hs/dealsign/codereview/0808223433/1_000000001/1233243454354366234`
User-Agent: АдресСервера
Content-Type: application/json
</code></pre>
<blockquote>
<p>Данный запрос возвращает строку в формате JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"IDClient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000005729"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"IDDeal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JJJ000141"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"506712"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"СообщениеОбОшибке"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Данный запрос позволяет отправить в базу &quot;Моя МФО&quot; код АСП (аналог собственоручной подписи), который клиент ввел на стороне сайта и в случае, если код введен верно вернуть подписанный данной АСП договор в формате pdf.
В результате запроса статус займа меняется на &quot;Подисан (дистанционно)&quot;.</p>
<h3 id='http-zapros-8'>HTTP-запрос</h3>
<p><code>GET http://&lt;АдресСервера&gt;/&lt;КаталогОпубликованногоHTTPСервиса&gt;/hs/dealsign/codereview/&lt;Паспорт&gt;/&lt;IDDeal&gt;/&lt;CodeSHA256&gt;</code></p>
<h3 id='parametry-zaprosa-8'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>АдресСервера</td>
<td>Адрес сервера, на котором опубликован веб-сервис</td>
</tr>
<tr>
<td>КаталогОпубликованногоHTTPСервиса</td>
<td>Каталог в папке wwwroot с опубликованным сервисом</td>
</tr>
<tr>
<td>Паспорт</td>
<td>Серия и номер паспорта без пробелов</td>
</tr>
<tr>
<td>IDDeal</td>
<td>Номер договора займа</td>
</tr>
<tr>
<td>CodeSHA256</td>
<td>Строка: &quot;IDClient + IDDeal + Код АСП&quot;, зашифрованная алгоритмом SHA256</td>
</tr>
</tbody></table>
<h3 id='vozvraschaemye-znacheniya-8'>Возвращаемые значения</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>IDClient</td>
<td>Код заемщика</td>
</tr>
<tr>
<td>IDDeal</td>
<td>Номер заявки (договора)</td>
</tr>
<tr>
<td>Code</td>
<td>Код АСП</td>
</tr>
<tr>
<td>СообщениеОбОшибке</td>
<td>Описание ошибки, если она возникает</td>
</tr>
</tbody></table>
<h1 id='priem-platezhey'>Прием платежей</h1><h2 id='poluchenie-svodnyh-dannyh-o-summe-tekuschey-zadolzhennosti-po-konkretnomu-dogovoru-dlya-vyvoda-v-lichnom-kabinete'>Получение сводных данных о сумме текущей задолженности по конкретному договору для вывода в личном кабинете</h2><pre class="highlight plaintext"><code>GET http://192.168.0.1/MeMFOWork/hs/PS/deal/1_000000001/0808223433`
User-Agent: АдресСервера
Content-Type: application/json
</code></pre>
<blockquote>
<p>Данный запрос возвращает строку в формате JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"НомерДоговора"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06042017.00001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ОбщийДолгНаТекДату"</span><span class="p">:</span><span class="w"> </span><span class="mf">245592.68</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ОстатокОД"</span><span class="p">:</span><span class="w"> </span><span class="mi">79249</span><span class="p">,</span><span class="w">
    </span><span class="s2">"СуммаПроценты"</span><span class="p">:</span><span class="w"> </span><span class="mf">166343.68</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ДолгПоТекПлатежу"</span><span class="p">:</span><span class="w"> </span><span class="mi">70515</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ОстатокОДПоТекПлатежу"</span><span class="p">:</span><span class="w"> </span><span class="mi">1781</span><span class="p">,</span><span class="w">
    </span><span class="s2">"СуммаПроцентыПоТекПлатежу"</span><span class="p">:</span><span class="w"> </span><span class="mi">68734</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ДолгПросроченный"</span><span class="p">:</span><span class="w"> </span><span class="mi">70515</span><span class="p">,</span><span class="w">
    </span><span class="s2">"КоличествоДнейПросрочки"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ОстатокОДПросрочено"</span><span class="p">:</span><span class="w"> </span><span class="mi">1781</span><span class="p">,</span><span class="w">
    </span><span class="s2">"СуммаПроцентыПросрочено"</span><span class="p">:</span><span class="w"> </span><span class="mi">68734</span><span class="p">,</span><span class="w">
    </span><span class="s2">"СуммаШтрафы"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"СуммаПошлина"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"СуммаПрочиеПлатежи"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ОстатокНаСчете"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ТекущийГрафикПлатежей"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"НомерСтроки"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ДатаПлатежа"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07- 06T00:00:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаПлатежа"</span><span class="p">:</span><span class="w"> </span><span class="mi">70515</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаОД"</span><span class="p">:</span><span class="w"> </span><span class="mi">1781</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаПроцентов"</span><span class="p">:</span><span class="w"> </span><span class="mi">68734</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаПрочиеПлатежи"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ОстатокОД"</span><span class="p">:</span><span class="w"> </span><span class="mi">77468</span><span class="p">,</span><span class="w">

        </span><span class="s2">"СуммаШтраф"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"НомерСтроки"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ДатаПлатежа"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08- 06T00:00:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаПлатежа"</span><span class="p">:</span><span class="w"> </span><span class="mi">270515</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаОД"</span><span class="p">:</span><span class="w"> </span><span class="mi">5573</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаПроцентов"</span><span class="p">:</span><span class="w"> </span><span class="mi">264942</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаПрочиеПлатежи"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ОстатокОД"</span><span class="p">:</span><span class="w"> </span><span class="mi">71895</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаШтраф"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"НомерСтроки"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ДатаПлатежа"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09- 06T00:00:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаПлатежа"</span><span class="p">:</span><span class="w"> </span><span class="mi">170515</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаОД"</span><span class="p">:</span><span class="w"> </span><span class="mi">17439</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаПроцентов"</span><span class="p">:</span><span class="w"> </span><span class="mi">153076</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаПрочиеПлатежи"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ОстатокОД"</span><span class="p">:</span><span class="w"> </span><span class="mi">54456</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаШтраф"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"НомерСтроки"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ДатаПлатежа"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10- 06T00:00:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаПлатежа"</span><span class="p">:</span><span class="w"> </span><span class="mi">170402</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаОД"</span><span class="p">:</span><span class="w"> </span><span class="mi">54456</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаПроцентов"</span><span class="p">:</span><span class="w"> </span><span class="mi">115946</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаПрочиеПлатежи"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ОстатокОД"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаШтраф"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"Оплаты"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"НомерПриходника"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ТСТ00000129"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ДатаОплаты"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06- 05T00:00:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаОплаты"</span><span class="p">:</span><span class="w"> </span><span class="mi">200000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ОнлайнОплата"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ОплатаНаРС"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"НомерПриходника"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ТСТ00000141"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ДатаОплаты"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06- 08T00:00:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"СуммаОплаты"</span><span class="p">:</span><span class="w"> </span><span class="mi">141030</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ОнлайнОплата"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ОплатаНаРС"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"СообщениеОбОшибке"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Данный запрос позволяет получить сводную информацию о текущих статьях задолженности, а так же текущий график платежей и историю внесенных оплат.</p>
<h3 id='http-zapros-9'>HTTP-запрос</h3>
<p><code>GET http://&lt;АдресСервера&gt;/&lt;КаталогОпубликованногоHTTPСервиса&gt;/hs/PS/deal/&lt;IDDeal&gt;/&lt;Паспорт&gt;</code></p>
<h3 id='parametry-zaprosa-9'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>АдресСервера</td>
<td>Адрес сервера, на котором опубликован веб-сервис</td>
</tr>
<tr>
<td>КаталогОпубликованногоHTTPСервиса</td>
<td>Каталог в папке wwwroot с опубликованным сервисом</td>
</tr>
<tr>
<td>IDDeal</td>
<td>Номер договора займа</td>
</tr>
<tr>
<td>Паспорт</td>
<td>Серия и номер паспорта без пробелов</td>
</tr>
</tbody></table>
<h3 id='vozvraschaemye-znacheniya-9'>Возвращаемые значения</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>СообщениеОбОшибке</td>
<td>Описание ошибки, если она возникает</td>
</tr>
</tbody></table>
<h2 id='poluchenie-dannyh-o-zadolzhennosti-pri-oplate-cherez-sayt-dlya-ekvayringa'>Получение данных о задолженности при оплате через сайт (для эквайринга)</h2><pre class="highlight plaintext"><code>GET http://192.168.0.1/MeMFOWork/hs/PS/dealforps/1_000000001/?pd=0808223433`
User-Agent: АдресСервера
Content-Type: application/json
</code></pre>
<blockquote>
<p>Данный запрос возвращает строку в формате JSON:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"НомерДоговора"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17062017.03.01"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ИмяОтчествоФ"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Андрей Александрович К."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Телефон"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8968*****10"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ОбщийДолгНаТекДату"</span><span class="p">:</span><span class="w"> </span><span class="mf">17866.74</span><span class="p">,</span><span class="w">
    </span><span class="s2">"СообщениеОбОшибке"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Данный запрос позволяет получить информацию о сумме текущего платежа, а так же информацию для проверки заемщиком достоверности предоставленных сведений.
Если на сайте имеется возможность приема платежей, перед перенаправлением клиента на форму ввода данных банковской карты система позволяет предоставить клиенту проверочную информацию,
которая позволяет ему узнать сумму, необходимую для внесения, а так же убедиться, что данная сумма действительно относится к нему, поскольку выводится его номер телефона и ФИО.</p>
<h3 id='http-zapros-10'>HTTP-запрос</h3>
<p><code>GET http://&lt;АдресСервера&gt;/&lt;КаталогОпубликованногоHTTPСервиса&gt;/hs/PS/dealforps/&lt;IDDeal&gt;/?pd=&lt;Паспорт&gt;</code></p>
<h3 id='parametry-zaprosa-10'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>АдресСервера</td>
<td>Адрес сервера, на котором опубликован веб-сервис</td>
</tr>
<tr>
<td>КаталогОпубликованногоHTTPСервиса</td>
<td>Каталог в папке wwwroot с опубликованным сервисом</td>
</tr>
<tr>
<td>IDDeal</td>
<td>Номер договора займа</td>
</tr>
<tr>
<td>Паспорт</td>
<td>Серия и номер паспорта без пробелов (не обязательный)</td>
</tr>
</tbody></table>
<h3 id='vozvraschaemye-znacheniya-10'>Возвращаемые значения</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>СообщениеОбОшибке</td>
<td>Описание ошибки, если она возникает</td>
</tr>
</tbody></table>
<h2 id='otrazhenie-v-sisteme-quot-moya-mfo-quot-poluchennogo-na-sayte-platezha-ekvayring'>Отражение в системе &quot;Моя МФО&quot; полученного на сайте платежа (эквайринг)</h2><pre class="highlight plaintext"><code>GET http://192.168.0.1/MeMFOWork/hs/Payment/Site/&lt;IDPayServise&gt;/?command=pay&amp;txn_id=4431523121&amp;txn_date=20170825120133&amp;account=1_1000089&amp;sum=2200
User-Agent: АдресСервера
Content-Type: application/xml
</code></pre>
<blockquote>
<p>Данный запрос возвращает строку в формате XML:</p>
</blockquote>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;response&gt;</span>
    <span class="nt">&lt;osmp_txn_id&gt;</span>4431523121<span class="nt">&lt;/osmp_txn_id&gt;</span>
    <span class="nt">&lt;prv_txn&gt;</span>16286f65-9bc9-11e7-ae9f-000c2990aa10<span class="nt">&lt;/prv_txn&gt;</span>
    <span class="nt">&lt;sum&gt;</span>2200<span class="nt">&lt;/sum&gt;</span>
    <span class="nt">&lt;result&gt;</span>0<span class="nt">&lt;/result&gt;</span>
<span class="nt">&lt;/response&gt;</span>
</code></pre>
<p>Данный запрос позволяет произвести отражение в системе платежа, который был осуществлен клиентом на сайте.</p>

<aside class="notice">
Данный запрос отправляет сайт после получения информации от платежного сервиса о внесенном платеже.
</aside>
<h3 id='http-zapros-11'>HTTP-запрос</h3>
<p><code>GET http://&lt;АдресСервера&gt;/&lt;КаталогОпубликованногоHTTPСервиса&gt;/hs/Payment/Site/&lt;IDPayServise&gt;/?command=&lt;Command&gt;&amp;txn_id=&lt;osmp_txn_id&gt;&amp;txn_date=&lt;DatePayment&gt;&amp;account=&lt;IDDeal&gt;&amp;sum=&lt;Sum&gt;</code></p>
<h3 id='parametry-zaprosa-11'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>АдресСервера</td>
<td>Адрес сервера, на котором опубликован веб-сервис</td>
</tr>
<tr>
<td>КаталогОпубликованногоHTTPСервиса</td>
<td>Каталог в папке wwwroot с опубликованным сервисом</td>
</tr>
<tr>
<td>IDPayServise</td>
<td>Идентификатор платежного сервиса в системе &quot;Моя МФО&quot; (Настройки Моя МФО\Общие\Обмен с сайтом\Платежные сервисы)</td>
</tr>
<tr>
<td>Command</td>
<td>Команда для отражения в системе &quot;Моя МФО&quot;. Может принимать два значения: check - проверка возможности, pay - внесение оплаты</td>
</tr>
<tr>
<td>osmp_txn_id</td>
<td>Идентификатор платежа на стороне платежного сервиса</td>
</tr>
<tr>
<td>DatePayment</td>
<td>Дата платежа в формате &#39;yyyymmddhhmmss&#39;</td>
</tr>
<tr>
<td>IDDeal</td>
<td>Номер договора займа</td>
</tr>
<tr>
<td>Sum</td>
<td>Сумма платежа</td>
</tr>
</tbody></table>
<h3 id='vozvraschaemye-znacheniya-11'>Возвращаемые значения</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>osmp_txn_id</td>
<td>Идентификатор платежа на стороне платежного сервиса</td>
</tr>
<tr>
<td>prv_txn</td>
<td>Идентификатор платежа в системе &quot;Моя МФО&quot;</td>
</tr>
<tr>
<td>sum</td>
<td>Сумма платежа</td>
</tr>
<tr>
<td>result</td>
<td>Результат выполнения (0 - успешно; 1 - не успешно)</td>
</tr>
<tr>
<td>comment</td>
<td>Описание ошибки</td>
</tr>
<tr>
<td>СообщениеОбОшибке</td>
<td>Описание ошибки, если она возникает</td>
</tr>
</tbody></table>
<h2 id='otrazhenie-v-sisteme-quot-moya-mfo-quot-poluchennogo-platezha-cherez-platezhnye-sistemy-qiwi-zolotaya-korona-eleksnet-mkb-moskovskiy-kreditnyy-bank'>Отражение в системе &quot;Моя МФО&quot; полученного платежа через платежные системы: QIWI, Золотая корона, Элекснет, МКБ (Московский кредитный банк)</h2><pre class="highlight plaintext"><code>GET http://192.168.0.1/MeMFOWork/hs/Payment/QIWI/?command=pay&amp;txn_id=4431523121&amp;txn_date=20170825120133&amp;account=1_1000089&amp;sum=2200
User-Agent: АдресСервера
Content-Type: application/xml
</code></pre>
<blockquote>
<p>Данный запрос возвращает строку в формате XML:</p>
</blockquote>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;response&gt;</span>
    <span class="nt">&lt;osmp_txn_id&gt;</span>4431523121<span class="nt">&lt;/osmp_txn_id&gt;</span>
    <span class="nt">&lt;prv_txn&gt;</span>16286f65-9bc9-11e7-ae9f-000c2990aa10<span class="nt">&lt;/prv_txn&gt;</span>
    <span class="nt">&lt;sum&gt;</span>2200<span class="nt">&lt;/sum&gt;</span>
    <span class="nt">&lt;result&gt;</span>0<span class="nt">&lt;/result&gt;</span>
<span class="nt">&lt;/response&gt;</span>
</code></pre>
<p>Данный запрос позволяет произвести отражение в системе платежа, который был осуществлен клиентом через платежный сервис.</p>

<aside class="notice">
Данный запрос отправляет непосредственно платежный сервис.
</aside>
<h3 id='http-zapros-12'>HTTP-запрос</h3>
<p><code>GET http://&lt;АдресСервера&gt;/&lt;КаталогОпубликованногоHTTPСервиса&gt;/hs/Payment/&lt;PayServise&gt;/?command=&lt;Command&gt;&amp;txn_id=&lt;osmp_txn_id&gt;&amp;txn_date=&lt;DatePayment&gt;&amp;account=&lt;IDDeal&gt;&amp;sum=&lt;Sum&gt;</code></p>
<h3 id='parametry-zaprosa-12'>Параметры запроса</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>АдресСервера</td>
<td>Адрес сервера, на котором опубликован веб-сервис</td>
</tr>
<tr>
<td>КаталогОпубликованногоHTTPСервиса</td>
<td>Каталог в папке wwwroot с опубликованным сервисом</td>
</tr>
<tr>
<td>PayServise</td>
<td>Название платежного сервиса: MKB, ZK, QIWI</td>
</tr>
<tr>
<td>Command</td>
<td>Команда для отражения в системе &quot;Моя МФО&quot;. Может принимать два значения: check - проверка возможности, pay - внесение оплаты</td>
</tr>
<tr>
<td>osmp_txn_id</td>
<td>Идентификатор платежа на стороне платежного сервиса</td>
</tr>
<tr>
<td>DatePayment</td>
<td>Дата платежа в формате &#39;yyyymmddhhmmss&#39;</td>
</tr>
<tr>
<td>IDDeal</td>
<td>Номер договора займа</td>
</tr>
<tr>
<td>Sum</td>
<td>Сумма платежа</td>
</tr>
</tbody></table>
<h3 id='vozvraschaemye-znacheniya-12'>Возвращаемые значения</h3>
<table><thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead><tbody>
<tr>
<td>osmp_txn_id</td>
<td>Идентификатор платежа на стороне платежного сервиса</td>
</tr>
<tr>
<td>prv_txn</td>
<td>Идентификатор платежа в системе &quot;Моя МФО&quot;</td>
</tr>
<tr>
<td>sum</td>
<td>Сумма платежа</td>
</tr>
<tr>
<td>result</td>
<td>Результат выполнения (0 - успешно; 1 - не успешно)</td>
</tr>
<tr>
<td>comment</td>
<td>Описание ошибки</td>
</tr>
<tr>
<td>СообщениеОбОшибке</td>
<td>Описание ошибки, если она возникает</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="HTTP">HTTP</a>
          </div>
      </div>
    </div>
  </body>
</html>
